# 7.2

## 稳定币

稳定币从本质上来说是一种具有“锚定”属性的加密货币，其目标是锚定某一链下资产，并与其保持相同的价值。为了保持价格稳定，稳定币可以由链下资产做抵押（即抵押稳定币），或采用某种算法在某个时间点调节供需关系（即算法稳定币）。

## **肖臻教授第9节 BTC比特币脚本**

比特币系统中使用的脚本语言很简单，**唯一能访问的内存空间就是一个栈**，这点和通用脚本语言的区别很大。

#### **输入/输出脚本的几种形式**

##### [1]P2PK（Pay to Public Key）

输入脚本中直接给出付款人的签名（付款人用自己的私钥**对输入脚本所在的整个交易的签名**），输出脚本中直接给出收款人（注意在这里肯定要是同一个人）的公钥，最后的CHECKSIG是检查签名时用的指令。这种形式的脚本是最简单的，因为Public Key是直接在输出脚本中给出的。

![20190710155630469](D:/mangomd/assets/7.1/20190710155630469.png)

第三条语句，弹出栈顶的两个元素，用公钥PubKey检查一下签名Sig是否正确。如果正确，返回True，说明验证通过：

![20190710161205911](D:/mangomd/assets/7.1/20190710161205911.png)

##### [2]P2PKH（Pay to Public Key Hash）

P2PKH的输出脚本中没有给出收款人的公钥，给出的是公钥的哈希值。在输入脚本中给出了这个人的公钥（也就是既要给出公钥又要给出签名）。

![20190710161501861](D:/mangomd/assets/7.1/20190710161501861.png)

第三条语句，DUP是将栈顶元素复制了一遍（所以重复第二行语句的操作，又压入了一次公钥）。

第四条语句，将栈顶元素取出来取哈希，再将得到的哈希值压入栈（也就是将栈顶的公钥变成了其哈希值）。

第五条语句，将输出脚本中提供的公钥的哈希值压入栈。

![20190710163430213](D:/mangomd/assets/7.1/20190710163430213.png)

第六条语句，弹出栈顶的两个元素，比较它们是否相等（防止有人用自己的公钥冒充币的来源交易的收款人的公钥）。

第七条语句，弹出栈顶的两个元素，用公钥PubKey检查一下签名Sig是否正确。如果正确，返回True，说明验证通过。

##### [3]P2SH（Pay to Script Hash）

这是最复杂的一种形式，这种形式下**输出脚本给出的不是收款人的公钥的哈希，而是收款人提供的赎回脚本（Redeem Script）的哈希**。将来要花这个输出脚本的BTC的时候，相应交易的输入脚本要给出赎回脚本的具体内容，同时还要给出让赎回脚本能正确运行所需要的签名。

![20190710174801267](D:/mangomd/assets/7.1/20190710174801267.png)

P2SH在最初版本的比特币系统中是没有的，后来通过软分叉的形式加进去了，它常用的一个场景就是**多重签名**。<u>这第三个没太整明白。</u>