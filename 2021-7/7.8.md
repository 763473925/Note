# 7.8

## 肖臻教授第13节 BTC思考

### **哈希指针**

BTC系统中很多地方使用到了哈希指针。指针保存的本地内存地址，只有在本地计算机上才具有意义，如果发送给其他计算机就没有意义了。那么**在区块发布时候，哈希指针如何通过网络进行传播？**

> ***所谓哈希指针，只是系统中一种形象化的方法。实际应用时候，只有哈希而没有指针。***

因此可见，在block header中只有hash值，没有指针。那么如何查找到前一个区块的内容？
全节点一般将区块存储于一个key-value数据库中，key为哈希，value为区块内容。常用的key-value数据库为levelDB，只要掌握到最后一个区块的哈希值即可依据哈希值一直往前找到区块链所有内容。
有些节点只保存区块链部分信息，如果需要用到前面的区块，可以问其他节点要。哈希指针性质保证了整个区块链内容是不可篡改的。

### **区块“恋”**

有情侣一起买BTC，将私钥从中截断，每人保留其中一部分。如果未来两人依旧感情很好，就可以将钱取出；如果分手，这部分钱就会永久锁死，谁也无法取出，通过区块链的不可篡改性作为两人的爱情见证。这样做有什么问题？
如此下来，N个人怎么办？
如果按照这种方法，将私钥分为N份，但这样会有一系列问题。

1.如果N个人中任意一个人忘记私钥，则无法将钱取出。

2.截断私钥长度，会降低安全性，因为私钥长度会直接影响破解难度(2^256 远远大于 2^128)，之间难度差距远远不止一倍。（可见，对于多个人账户，应该使用多重签名，而非截断私钥的方法。）

3.如果分手，该钱变成死钱，一直保存在UTXO集合中，对矿工不友好。

<u>？（就算花出去了，不是也会存在UTXO集合中吗？）</u>

### **分布式共识**

理论上来说，分布式系统不可能达成共识。但实际中为何变成可能了？

严格来说，BTC系统分布式共识随时可能被推翻，例如分叉攻击导致系统回滚。此外，理论和实际存在差异，实际中对模型稍微修改或添加线下方法即可将不可能变为可能。

不要被学术界的思维限制头脑，不要让程序员的思维限制想象力。(肖老师讲滴好好)

### **BTC的稀缺性**

BTC总量固定，有人认为其是一个精妙的设计。但实际上，总量固定的东西并不适合作为货币，这也就决定了BTC并不能在未来完全颠覆现有货币体系。以太坊中便没有BTC中出块奖励定期减半的做法，此外，某些新型货币会自带通货膨胀的功能。

### **量子计算**

会不会BTC这种建立在密码学上的加密货币，在量子计算出来后会不会变得不安全？

量子计算若真正使用到破坏现有加密算法，对传统金融业的破坏仍然是最大的。

实际中使用的并非公钥，而是可以用公钥哈希。而哈希函数一般都是不可逆的，所以即使量子计算也无法反推私钥。
BTC中用的SHA-256，无论输入多大，最终结果都为256位，必然会导致信息丢失，无法反推原本数据。

总结：**加密可逆、哈希不可逆；加密不损失信息、哈希破坏信息**（加密和哈希的区别）

